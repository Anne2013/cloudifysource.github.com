---
layout: blogpost
title: Big Data on OpenStack
image: nati.png
author: Nati Shalom
tags: 
 - Cloudify
 - OpenStack
 - Big Data
---		
<div class="entry-body">
			<p><strong>Big Data and Cloud</strong></p>  <p>Big Data systems by their very nature tend to be...Big. </p>  <p>Big in the amount of data, in the number and size of infrastructure behind it, etc. Cloud based infrastructure can be a good solution to reduce big chunks of the infrastructure cost. While this may sound obvious, many of the Big Data deployments that I've encountered run outside of a cloud or any virtualized environment. The main reason is the performance overhead that is often associated in running on a virtualized environment.</p>  <p><strong>The Performance Overhead of Running Big Data on the Cloud</strong></p>  <p>A r<a href="http://petersenna.com/en/projects/81-performance-overhead-and-comparative-performance-of-4-virtualization-solutions"><strong>ecent benchmark</strong><img src="http://www.previewshots.com/images/v1.3/t.gif" style="margin: 0px; max-height: 2000px; max-width: 2000px; min-width: 0px; min-height: 0px; padding: 1px 0px 0px; border: 0px none; font-style: normal; font-weight: normal; font-family: &quot;trebuchet ms&quot;,arial,helvetica,sans-serif; float: none; position: static; left: auto; top: auto; line-height: normal; background-image: url(&quot;http://www.previewshots.com/images/v1.3/theme/silver/palette.gif&quot;); background-color: transparent; visibility: visible; width: 14px; height: 12px; background-position: -1128px 0px; background-repeat: no-repeat; text-decoration: none; vertical-align: top; display: inline;" class="snap_preview_icon" id="snap_com_shot_link_icon"></a> done by Petersenna over various virtualization solutions, such as XEN, VMWare, HyperV etc, shows that on average the performance overhead associated with virtualization can lead to 2.4 times slower disk latency and 25% slower network I/O.</p>  <p><a href="http://natishalom.typepad.com/.a/6a00d835457b7453ef01901d4014e8970b-pi"><img width="363" height="257" border="0" title="clip_image002" style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" src="http://natishalom.typepad.com/.a/6a00d835457b7453ef019103362ab3970c-pi" alt="clip_image002"></a></p>  <p><strong>How does the performance overhead translate into cost?</strong></p>  <p>Based on the various benchmarks, I think that it would be fair to assume that running I/O intrusive workloads such as Big Data on a virtualized infrastructure would require 3X more resources than its Bare Metal equivalent.</p>  <p>As we are talking about Big Data infrastructure - 3x means a lots of wasted resources. The operational costs coupled with the complexity associated with running a significantly bigger system yields a fairly substantial overhead and cost. In addition, the Network and Disk overhead are not deterministic and can vary quite substantially when the utilization gets higher. This leads to not just performance overhead, but also non-deterministic overhead. In Big Data terms, that means that a query for particular data can take 10msec one time or 30msec another time. Quite often, running Big Data analysis requires a sequence of operations. Therefore, if we pile this overhead in a sequence of 10 queries, the variance in the response time can vary quite substantially.</p>  <p>While the choice of running Big Data on the cloud holds a lot of promise, the performance and non-deterministic behavior makes that choice limited to more of a niche scenario where this overhead&nbsp; becomes less significant in comparison to the elasticity benefit of the cloud. For example, for sporadic workloads in which we run our analysis for a certain period of time and then need to clear out the environment, using on-demand infrastructure is still a better choice, as running 3x the amount of resources for an hour is significantly cheaper than having a third of that infrastructure allocated 24/7.</p>  <p><strong>OpenStack Bare Metal Cloud</strong></p>  <p>The analysis above shows that for I/O intensive workloads, virtualized infrastructure isn't such a good fit.</p>  <p>Cloud is often viewed as an infrastructure on top of virtualization. Therefore, by definition, a cloud-based infrastructure inherits the benefits and limitations of virtualization.</p>  <p>Is the coupling between cloud and virtualization really necessary?</p>  <p>If we think of a cloud as an infrastructure for getting compute, storage and network resources on-demand, then there is nothing&nbsp; to necessitate the coupling of the cloud with virtualization. It became common to pair the two mainly because of the complexity involved with provisioning non-virtualized resources and the limitations in enabling partitioning of a given bare metal machine.</p>  <p>As I noted in one of my previous posts <a href="http://natishalom.typepad.com/nati_shaloms_blog/2012/05/bare-metal-paas.html"><strong>Bare Metal Cloud/PaaS</strong></a>,&nbsp; there are ways today to provision a bare metal machine from an image and partition it just like we would do with a hypervisor based VM.&nbsp; There are already cloud providers that offer a choice of bare metal machines as part of their cloud infrastructure.</p>  <p>A new <a href="https://wiki.openstack.org/wiki/Baremetal"><strong>bare metal project</strong></a> in the OpenStack Grizzly release takes this a step further. It allows us to use the same compute API (NOVA) and allocate a bare metal machine just as we would with a virtualized machine.</p>  <p>All we need to do to make the switch is to change the image type of our target machine and the cloud infrastructure will know to map that request and allocate a bare metal image instead of a virtualized instance.</p>  <p>With this option we can now run our entire Big Data workload on the cloud and not worry about switching environments depending on the workload.</p>  <p><strong>HubSpot OpenStack &ndash; Bare Metal Case Study</strong></p>  <p>During the <a href="http://gigaom.com/2013/04/16/top-5-lessons-learned-at-openstack-summit/%0D%0A"><strong>last OpenStack Summit, </strong><img src="http://www.previewshots.com/images/v1.3/t.gif" style="margin: 0px; max-height: 2000px; max-width: 2000px; min-width: 0px; min-height: 0px; padding: 1px 0px 0px; border: 0px none; font-style: normal; font-weight: normal; font-family: &quot;trebuchet ms&quot;,arial,helvetica,sans-serif; float: none; position: static; left: auto; top: auto; line-height: normal; background-image: url(&quot;http://www.previewshots.com/images/v1.3/theme/silver/palette.gif&quot;); background-color: transparent; visibility: visible; width: 14px; height: 12px; background-position: -1128px 0px; background-repeat: no-repeat; text-decoration: none; vertical-align: top; display: inline;" class="snap_preview_icon" id="snap_com_shot_link_icon"></a><a href="http://www.linkedin.com/in/jajoneill"><strong>Jim O’Neill</strong><img src="http://www.previewshots.com/images/v1.3/t.gif" style="margin: 0px; max-height: 2000px; max-width: 2000px; min-width: 0px; min-height: 0px; padding: 1px 0px 0px; border: 0px none; font-style: normal; font-weight: normal; font-family: &quot;trebuchet ms&quot;,arial,helvetica,sans-serif; float: none; position: static; left: auto; top: auto; line-height: normal; background-image: url(&quot;http://www.previewshots.com/images/v1.3/theme/silver/palette.gif&quot;); background-color: transparent; visibility: visible; width: 14px; height: 12px; background-position: -1128px 0px; background-repeat: no-repeat; text-decoration: none; vertical-align: top; display: inline;" class="snap_preview_icon" id="snap_com_shot_link_icon"></a> CIO at HubSpot showed how using OpenStack with a combination of a public cloud and private bare metal cloud enabled a 4X increase in their infrastructure efficiency:</p>  <p><a href="http://natishalom.typepad.com/.a/6a00d835457b7453ef01901d401519970b-pi"><img width="91" height="91" border="0" align="left" title="clip_image004" style="border-bottom: 0px; border-left: 0px; display: inline; margin-left: 0px; border-top: 0px; margin-right: 0px; border-right: 0px" src="http://natishalom.typepad.com/.a/6a00d835457b7453ef019103362af4970c-pi" alt="clip_image004"></a></p>  <blockquote>   <p>&nbsp;</p>    <p>"We took this single image, picked it up from public cloud into a Rackspace-powered private cloud and saw a 4X increased efficiency running that workload."</p> </blockquote>  <p><strong></strong></p>  <p><strong>Moving from Existing Data Centers to the Cloud</strong></p>  <p><a href="http://natishalom.typepad.com/.a/6a00d835457b7453ef01901d401552970b-pi"><img width="378" height="219" border="0" title="clip_image006" style="border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px" src="http://natishalom.typepad.com/.a/6a00d835457b7453ef0192aafe72e4970d-pi" alt="clip_image006"></a></p>  <p>Many existing Big Data and BI systems run on traditional data center environments. Moving those systems into an OpenStack-based environment isn't going to be a walk in the park. This is where automation frameworks, such as <a target="_blank" href="http://www.gigaspaces.com/cloudify-open-paas-stack">Cloudify<img src="http://www.previewshots.com/images/v1.3/t.gif" style="margin: 0px; max-height: 2000px; max-width: 2000px; min-width: 0px; min-height: 0px; padding: 1px 0px 0px; border: 0px none; font-style: normal; font-weight: normal; font-family: &quot;trebuchet ms&quot;,arial,helvetica,sans-serif; float: none; position: static; left: auto; top: auto; line-height: normal; background-image: url(&quot;http://www.previewshots.com/images/v1.3/theme/silver/palette.gif&quot;); background-color: transparent; visibility: visible; width: 14px; height: 12px; background-position: -1128px 0px; background-repeat: no-repeat; text-decoration: none; vertical-align: top; display: inline;" class="snap_preview_icon" id="snap_com_shot_link_icon"></a> with the combination of Chef and Puppet, make this transition smoother.</p>  <p>In this approach, we can automate the deployment of our existing Big Data/BI systems in a way that will be abstracted from the underlying infrastructure. We can later use this abstraction to run Big Data systems in our existing data center, and when ready, we can use the same deployment framework on an OpenStack-based environment.</p>  <p><strong>Learn more through hands-on experience - a Real Life Experience on HP OpenStack</strong></p>  <p>I understand that the points and arguments from this post may often sound artificial and not easy to grasp. To make it more down to earth, we've put a NoSQL datastore such as Couchbase, MongoDB, Cassandra, ElasticSearch and Big Data applications available on-demand on HP OpenStack cloud services. You can use this reference to launch any of those applications and then use the management console to browse through the recipes and customize it to your environment as needed.</p>  <p>It is also worth pointing out that the recipes behind this project are available on Github and can be easily deployed on your cloud or in your data center. If you are interested in more details, please post a comment on this post or in the <a target="_blank" href="https://cloudifysource.zendesk.com/forums">Cloudify forum</a>.</p>  <p>&nbsp;</p>  <p>&nbsp;</p>  <p>For more on Big Data on OpenStack, come check out my presentation at <a target="_blank" href="http://www.cloudcomputingexpo.com/event/schedule#DAY2">Cloud Expo East<img src="http://www.previewshots.com/images/v1.3/t.gif" style="margin: 0px; max-height: 2000px; max-width: 2000px; min-width: 0px; min-height: 0px; padding: 1px 0px 0px; border: 0px none; font-style: normal; font-weight: normal; font-family: &quot;trebuchet ms&quot;,arial,helvetica,sans-serif; float: none; position: static; left: auto; top: auto; line-height: normal; background-image: url(&quot;http://www.previewshots.com/images/v1.3/theme/silver/palette.gif&quot;); background-color: transparent; visibility: visible; width: 14px; height: 12px; background-position: -1128px 0px; background-repeat: no-repeat; text-decoration: none; vertical-align: top; display: inline;" class="snap_preview_icon" id="snap_com_shot_link_icon"></a> on Tuesday, June 11th at 8:15am in the "Cloud Computing and Big Data" Track.</p>  <p><strong>&nbsp;</strong></p>  <p><strong>References</strong></p>  <ul>   <li><a href="http://natishalom.typepad.com/nati_shaloms_blog/2012/05/bare-metal-paas.html"><strong>Bare Metal Cloud/PaaS</strong></a> </li>    <li><a href="https://wiki.openstack.org/wiki/Baremetal"><strong>OpenStack Baremetal Project</strong></a> </li>    <li><a href="http://radar.oreilly.com/2012/02/big-data-in-the-cloud-microsoft-amazon-google.html"><strong>Big Data in the Cloud</strong><img src="http://www.previewshots.com/images/v1.3/t.gif" style="margin: 0px; max-height: 2000px; max-width: 2000px; min-width: 0px; min-height: 0px; padding: 1px 0px 0px; border: 0px none; font-style: normal; font-weight: normal; font-family: &quot;trebuchet ms&quot;,arial,helvetica,sans-serif; float: none; position: static; left: auto; top: auto; line-height: normal; background-image: url(&quot;http://www.previewshots.com/images/v1.3/theme/silver/palette.gif&quot;); background-color: transparent; visibility: visible; width: 14px; height: 12px; background-position: -1128px 0px; background-repeat: no-repeat; text-decoration: none; vertical-align: top; display: inline;" class="snap_preview_icon" id="snap_com_shot_link_icon"></a> </li>    <li><a href="http://natishalom.typepad.com/nati_shaloms_blog/2012/03/big-data-in-the-cloud.html"><strong>Big Data in the Cloud using Cloudify</strong></a> </li>    <li><a href="http://www.bigdataspain.org/2012/conference/putting-hadoop-cloud/nati-shalom"><strong>Putting Hadoop On Any Cloud (A video presentation)</strong><img src="http://www.previewshots.com/images/v1.3/t.gif" style="margin: 0px; max-height: 2000px; max-width: 2000px; min-width: 0px; min-height: 0px; padding: 1px 0px 0px; border: 0px none; font-style: normal; font-weight: normal; font-family: &quot;trebuchet ms&quot;,arial,helvetica,sans-serif; float: none; position: static; left: auto; top: auto; line-height: normal; background-image: url(&quot;http://www.previewshots.com/images/v1.3/theme/silver/palette.gif&quot;); background-color: transparent; visibility: visible; width: 14px; height: 12px; background-position: -1128px 0px; background-repeat: no-repeat; text-decoration: none; vertical-align: top; display: inline;" class="snap_preview_icon" id="snap_com_shot_link_icon"></a> </li>    <li><a href="http://natishalom.typepad.com/nati_shaloms_blog/2013/01/in-memory-computing-data-grid-for-big-data.html"><strong>In Memory Computing (Data Grid) for Big Data</strong></a> </li>    <li><a href="http://natishalom.typepad.com/nati_shaloms_blog/2013/05/using-the-cloudify-player-as-an-open-source-framework-for-building-your-own-cloud-application-marketplace-on-openstack.html"><strong>Using the Cloudify Player as an Open Source Framework for Building Your Own Cloud Application Marketplace on OpenStack</strong></a> </li>    <li><a href="http://www.infoworld.com/d/cloud-computing/going-native-the-move-bare-metal-cloud-services-192507"><strong>Going native: The move to bare-metal cloud services</strong><img src="http://www.previewshots.com/images/v1.3/t.gif" style="margin: 0px; max-height: 2000px; max-width: 2000px; min-width: 0px; min-height: 0px; padding: 1px 0px 0px; border: 0px none; font-style: normal; font-weight: normal; font-family: &quot;trebuchet ms&quot;,arial,helvetica,sans-serif; float: none; position: static; left: auto; top: auto; line-height: normal; background-image: url(&quot;http://www.previewshots.com/images/v1.3/theme/silver/palette.gif&quot;); background-color: transparent; visibility: visible; width: 14px; height: 12px; background-position: -1128px 0px; background-repeat: no-repeat; text-decoration: none; vertical-align: top; display: inline;" class="snap_preview_icon" id="snap_com_shot_link_icon"></a> </li>    <li><a href="http://www.networkworld.com/news/2012/050112-bare-metal-cloud-258849.html"><strong>New bare metal cloud offerings emerging</strong><img src="http://www.previewshots.com/images/v1.3/t.gif" style="margin: 0px; max-height: 2000px; max-width: 2000px; min-width: 0px; min-height: 0px; padding: 1px 0px 0px; border: 0px none; font-style: normal; font-weight: normal; font-family: &quot;trebuchet ms&quot;,arial,helvetica,sans-serif; float: none; position: static; left: auto; top: auto; line-height: normal; background-image: url(&quot;http://www.previewshots.com/images/v1.3/theme/silver/palette.gif&quot;); background-color: transparent; visibility: visible; width: 14px; height: 12px; background-position: -1128px 0px; background-repeat: no-repeat; text-decoration: none; vertical-align: top; display: inline;" class="snap_preview_icon" id="snap_com_shot_link_icon"></a> </li>    <li><a href="http://www.networkworld.com/news/2012/050112-bare-metal-cloud-258849.html"><strong><img width="1" height="1" border="0" title="clip_image007" style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" src="http://natishalom.typepad.com/.a/6a00d835457b7453ef0192aaf6ba27970d-pi" alt="clip_image007"></strong><img src="http://www.previewshots.com/images/v1.3/t.gif" style="margin: 0px; max-height: 2000px; max-width: 2000px; min-width: 0px; min-height: 0px; padding: 1px 0px 0px; border: 0px none; font-style: normal; font-weight: normal; font-family: &quot;trebuchet ms&quot;,arial,helvetica,sans-serif; float: none; position: static; left: auto; top: auto; line-height: normal; background-image: url(&quot;http://www.previewshots.com/images/v1.3/theme/silver/palette.gif&quot;); background-color: transparent; visibility: visible; width: 14px; height: 12px; background-position: -1128px 0px; background-repeat: no-repeat; text-decoration: none; vertical-align: top; display: inline;" class="snap_preview_icon" id="snap_com_shot_link_icon"></a><a href="http://serverfault.com/questions/261974/how-much-overhead-does-x86-x64-virtualization-have"><strong>How much overhead does x86/x64 virtualization have?</strong><img src="http://www.previewshots.com/images/v1.3/t.gif" style="margin: 0px; max-height: 2000px; max-width: 2000px; min-width: 0px; min-height: 0px; padding: 1px 0px 0px; border: 0px none; font-style: normal; font-weight: normal; font-family: &quot;trebuchet ms&quot;,arial,helvetica,sans-serif; float: none; position: static; left: auto; top: auto; line-height: normal; background-image: url(&quot;http://www.previewshots.com/images/v1.3/theme/silver/palette.gif&quot;); background-color: transparent; visibility: visible; width: 14px; height: 12px; background-position: -1128px 0px; background-repeat: no-repeat; text-decoration: none; vertical-align: top; display: inline;" class="snap_preview_icon" id="snap_com_shot_link_icon"></a> </li> </ul> <a href="http://serverfault.com/questions/261974/how-much-overhead-does-x86-x64-virtualization-have"><strong><img width="1" height="1" border="0" title="clip_image007[1]" style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" src="http://natishalom.typepad.com/.a/6a00d835457b7453ef01901d385364970b-pi" alt="clip_image007[1]"></strong><img src="http://www.previewshots.com/images/v1.3/t.gif" style="margin: 0px; max-height: 2000px; max-width: 2000px; min-width: 0px; min-height: 0px; padding: 1px 0px 0px; border: 0px none; font-style: normal; font-weight: normal; font-family: &quot;trebuchet ms&quot;,arial,helvetica,sans-serif; float: none; position: static; left: auto; top: auto; line-height: normal; background-image: url(&quot;http://www.previewshots.com/images/v1.3/theme/silver/palette.gif&quot;); background-color: transparent; visibility: visible; width: 14px; height: 12px; background-position: -1128px 0px; background-repeat: no-repeat; text-decoration: none; vertical-align: top; display: inline;" class="snap_preview_icon" id="snap_com_shot_link_icon"></a><a href="http://boomboxtesting.ning.com/profiles/blogs/amazon-ec2-versus-bare-metal"><strong>Amazon EC2 versus Bare Metal and KVM? The inside story on what you thought you knew about EC2</strong><img src="http://www.previewshots.com/images/v1.3/t.gif" style="margin: 0px; max-height: 2000px; max-width: 2000px; min-width: 0px; min-height: 0px; padding: 1px 0px 0px; border: 0px none; font-style: normal; font-weight: normal; font-family: &quot;trebuchet ms&quot;,arial,helvetica,sans-serif; float: none; position: static; left: auto; top: auto; line-height: normal; background-image: url(&quot;http://www.previewshots.com/images/v1.3/theme/silver/palette.gif&quot;); background-color: transparent; visibility: visible; width: 14px; height: 12px; background-position: -1128px 0px; background-repeat: no-repeat; text-decoration: none; vertical-align: top; display: inline;" class="snap_preview_icon" id="snap_com_shot_link_icon"></a>
		</div>